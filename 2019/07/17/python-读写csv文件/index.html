


<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>python 读写csv文件 [ 市井烟火气 ]</title>
	
	
	<!-- stylesheets list from _config.yml -->
	
	<link rel="stylesheet" href="/css/PreciousJoy.css">
	
	<link rel="stylesheet" href="/css/top-bar.css">
	
	<link rel="stylesheet" href="/css/menu-outer.css">
	
	<link rel="stylesheet" href="/css/content-outer.css">
	
	<link rel="stylesheet" href="/css/bottom-outer.css">
	
	<link rel="stylesheet" href="/css/atom-one-dark.css">
	
	<link rel="stylesheet" href="/css/recent-posts-item.css">
	
	<link rel="stylesheet" href="/css/article-sidebar-toc.css">
	
	<link rel="stylesheet" href="/css/jquery.fancybox.min.css">
	
	<link rel="stylesheet" href="/css/search.css">
	
	<link rel="stylesheet" href="/css/toc.css">
	
	<link rel="stylesheet" href="/css/sidebar.css">
	
	<link rel="stylesheet" href="/css/archive.css">
	
	<link rel="stylesheet" href="/css/jquery.mCustomScrollbar.min.css">
	
	<link rel="stylesheet" href="/css/Z-last-cover-others.css">
	
	
	
</head>




<body id="wrapper">

	<div id="">
		
		<div id="top-bar">
			
			<div id="avatar-box">
				<img class="avatar" src="/images/avatar.png" alt="avatar">
			</div>

			<div id="top-bar-text">
				<div id="top-bar-title">
					fireworks99
				</div>
				<div id="top-bar-slogan">
					keep hungry keep foolish
				</div>
			</div>

		</div>

		<div id="menu-outer">
			<div id="menu-inner">
				
				
				<div class="menu-item">
					<a href="/">Home</a>
				</div>
				
				<div class="menu-item">
					<a href="/about">About</a>
				</div>
				
				<div class="menu-item">
					<a href="/archives">Archives</a>
				</div>
				

				<div class="menu-item menu-item-search">
					
  <span class="local-search local-search-google local-search-plugin">
      <input type="search" placeholder="站内搜索" id="local-search-input" class="local-search-input-cls" style="">
      <div id="local-search-result" class="local-search-result-cls"></div>
  </span>
	
				</div>

			</div>
		</div>

		<div id="content-outer">
			<div id="content-inner">

				
<div id="details">
	
	<article id="details-post">
		<div id="details-post-item">
			<h1>python 读写csv文件</h1>
			<h3 id="Python读取csv文件统计数据写入新的csv文件"><a href="#Python读取csv文件统计数据写入新的csv文件" class="headerlink" title="Python读取csv文件统计数据写入新的csv文件"></a>Python读取csv文件统计数据写入新的csv文件</h3><a id="more"></a>
<blockquote>
<p>原始资料文件</p>
</blockquote>
<p><img src="https://i.loli.net/2019/07/17/5d2f0a3b34d9b72701.jpg" alt="原始资料csv文件"></p>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><pre><code class="lang-python">&#39;&#39;&#39;
pycharm里，写完了暂时没有用到的东西会显示为灰色
就像eclipse似的，写出来暂时没用到的东西会有标注
&#39;&#39;&#39;
import csv

data_path = &#39;./train.csv&#39;

def run_main():

    pclass_dict = {}
    gender_dict = {}
    age_dict = {}
    sibsp_dict = {}
    parch_dict = {}
    fare_dict = {}
    embarked_dict = {}

    with open(data_path, &#39;r&#39;, newline=&#39;&#39;) as csvfile:
        rows = csv.reader(csvfile)
        for i, row in enumerate(rows):
            if i == 0:
                continue

            if i % 50 == 0:
                print(&#39;正在处理第{}行数据...&#39;.format(i))

            survived = row[1]
            pclass = row[2]
            gender = row[3]
            age = row[4]
            sibsp = row[5]
            parch = row[6]
            fare = row[7]
            embarked = row[8]


            pclass = pclass.replace(&#39; &#39;, &#39;&#39;)
            gender = gender.replace(&#39; &#39;, &#39;&#39;)
            age = age.replace(&#39; &#39;, &#39;&#39;)
            sibsp = sibsp.replace(&#39; &#39;, &#39;&#39;)
            parch = parch.replace(&#39; &#39;, &#39;&#39;)
            fare = fare.replace(&#39; &#39;, &#39;&#39;)
            embarked = embarked.replace(&#39; &#39;, &#39;&#39;)

            if gender not in gender_dict:
                gender_dict[gender] = [0, 0]
            if survived == &#39;0&#39;:                     # 字符0
                gender_dict[gender][0] += 1
            elif survived == &#39;1&#39;:
                gender_dict[gender][1] += 1
            else:
                pass

            if pclass not in pclass_dict:
                pclass_dict[pclass] = [0, 0]
            if survived == &#39;0&#39;:
                pclass_dict[pclass][0] += 1
            elif survived == &#39;1&#39;:
                pclass_dict[pclass][1] += 1
            else:
                pass

            if age not in age_dict:
                age_dict[age] = [0, 0]
            if survived == &#39;0&#39;:
                age_dict[age][0] += 1
            elif survived == &#39;1&#39;:
                age_dict[age][1] += 1
            else:
                pass

            if sibsp not in sibsp_dict:
                sibsp_dict[sibsp] = [0, 0]
            if survived == &#39;0&#39;:
                sibsp_dict[sibsp][0] += 1
            elif survived == &#39;1&#39;:
                sibsp_dict[sibsp][1] += 1
            else:
                pass

            if parch not in parch_dict:
                parch_dict[parch] = [0, 0]
            if survived == &#39;0&#39;:
                parch_dict[parch][0] += 1
            elif survived == &#39;1&#39;:
                parch_dict[parch][1] += 1
            else:
                pass

            if fare not in fare_dict:
                fare_dict[fare] = [0, 0]
            if survived == &#39;0&#39;:
                fare_dict[fare][0] += 1
            elif survived == &#39;1&#39;:
                fare_dict[fare][1] += 1
            else:
                pass

            if embarked not in embarked_dict:
                embarked_dict[embarked] = [0, 0]
            if survived == &#39;0&#39;:
                embarked_dict[embarked][0] += 1
            elif survived == &#39;1&#39;:
                embarked_dict[embarked][1] += 1
            else:
                pass

    print(&#39;Finished!&#39;)

    with open(&#39;result.csv&#39;, &#39;w&#39;, newline=&#39;&#39;, encoding=&#39;utf-16&#39;) as csvfile:
        csvwriter = csv.writer(csvfile, delimiter=&#39;,&#39;)
        csvwriter.writerow([&#39;gender&#39;, &#39;dead&#39;, &#39;survived&#39;])
        # csvwriter.writerow([&#39;male&#39;, gender_dict[&#39;male&#39;][0], gender_dict[&#39;female&#39;][1]])
        # csvwriter.writerow([&#39;female&#39;, gender_dict[&#39;female&#39;][0], gender_dict[&#39;female&#39;][1]])
        for k, v in list(gender_dict.items()):
            csvwriter.writerow([k, v[0], v[1]])

        csvwriter.writerow([ &#39;pclass&#39;, &#39;dead&#39;, &#39;survived&#39;])
        for k, v in list(pclass_dict.items()):
            csvwriter.writerow([k, v[0], v[1]])               # 小括号里有中括号

        csvwriter.writerow([ &#39;age&#39;, &#39;dead&#39;, &#39;survived&#39; ])
        for k, v in list(age_dict.items()):
            csvwriter.writerow([k, v[0], v[1]])

        csvwriter.writerow([&#39;sibsp&#39;, &#39;dead&#39;, &#39;survived&#39;])
        for k, v in list(sibsp_dict.items()):
            csvwriter.writerow([k, v[0], v[1]])

        csvwriter.writerow([ &#39;parch&#39;, &#39;dead&#39;, &#39;survived&#39;])
        for k, v in list(parch_dict.items()):
            csvwriter.writerow([k, v[0], v[1]])

        csvwriter.writerow([ &#39;fare&#39;, &#39;dead&#39;, &#39;survived&#39; ])
        for k, v in list(fare_dict.items()):
            csvwriter.writerow([k, v[0], v[1]])

        csvwriter.writerow([ &#39;embarked&#39;, &#39;dead&#39;, &#39;survived&#39; ])
        for k, v in list(embarked_dict.items()):
            csvwriter.writerow([k, v[0], v[1]])


if __name__ == &#39;__main__&#39;:
        run_main()



&#39;&#39;&#39;
            这段代码有问题
            gender_dict[&#39;male&#39;] = [0, 0]
            gender_dict[&#39;female&#39;] = [0, 0]
            if gender == &#39;male&#39;:
                if survived == &#39;0&#39;:
                    gender_dict[&#39;male&#39;][0] += 1          # dead mem
                elif survived == &#39;1&#39;:
                    gender_dict[&#39;male&#39;][1] += 1          # lived men
                else:
                    pass
            elif gender == &#39;female&#39;:
                if survived == &#39;0&#39;:
                    gender_dict[&#39;female&#39;][0] += 1        # dead women
                elif survived == &#39;1&#39;:
                    gender_dict[&#39;female&#39;][1] += 1        # lived women
                else:
                    pass
            else:
                pass
&#39;&#39;&#39;
</code></pre>
<blockquote>
<p>生成的初始文件经“导入”处理后的文件</p>
</blockquote>
<p><img src="https://i.loli.net/2019/07/17/5d2f0972eda8030079.jpg" alt="生成的初始csv文件经导入后的csv文件"></p>

		</div>

		<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC80NjIyNC8yMjczNQ==">
	<script type="text/javascript">
	   (function(d, s) {
	       var j, e = d.getElementsByTagName(s)[0];

	       if (typeof LivereTower === 'function') { return; }

	       j = d.createElement(s);
	       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
	       j.async = true;

	       e.parentNode.insertBefore(j, e);
	       
	       
	   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->
		
	</article>

	<div id="toc">
		
	</div>

</div>

<!-- <div id="paginator"> -->
<!-- 	 -->
<!-- </div> -->




			</div>
		</div>

		<div id="bottom-outer">
			<div id="bottom-inner">
				Site by Baole Zhao | 
				Powered by <a href="http://hexo.io">Hexo</a> |
				theme <a href="https://github.com/fireworks99/hexo-theme-PreciousJoy">PreciousJoy</a>
			</div>
		</div>

		
	</div>





	
	<!-- scripts list from theme config.yml -->
	
	<script src="/js/jquery-3.5.1.min.js"></script>
	
	<script src="/js/PreciousJoy.js"></script>
	
	<script src="/js/highlight.pack.js"></script>
	
	<script src="/js/jquery.fancybox.min.js"></script>
	
	<script src="/js/search.js"></script>
	
	<script src="/js/load.js"></script>
	
	<script src="/js/jquery.mCustomScrollbar.concat.min.js"></script>
	
	<script src="/js/clipboard.min.js"></script>
	
	

	<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
